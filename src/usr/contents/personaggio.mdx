---
title: "Record example"
date: "2023-10-01"
slug: "personaggio"
description: ""
---

import { Record, Field } from "../../modules/scms.js";
import "../layout/style.css";
import TestoLungo from "../components/testoLungo.js";

export default function RecordPage() {
  return (
    <div className="row">
      {/* Colonna principale (Dati e Testo) */}
      <div className="col-md-8">
        <Record>
          {/* Header - Nome e Dati Principali */}
          <div className="p-3 text-white" style={{ background: "linear-gradient(to bottom, #822433, #a03b4e)", borderRadius: "8px" }}>
            <h2 className="text-uppercase" style={{ fontSize: "1.5rem" }}>
              <Field name={["nome_e_cognome"]} />
            </h2>
            <div className="mt-2" style={{ fontSize: "1rem" }}>
              <Field name={["soprannome"]} transformer={(value) => value || "Non disponibile"} /> {" ( "}
              <Field name={["provenienza"]} transformer={(value) => value || "Non disponibile"} /> {", "}
              <Field name={["anno_di_nascita"]} transformer={(value) => value || "Non disponibile"} /> {" - "}
              <Field name={["anno_di_morte"]} transformer={(value) => value || "Non disponibile"} /> {"), dies Natalis: "}
              <Field name={["dies_natalis"]} transformer={(value) => value || "Non disponibile"} />
            </div>
          </div>

          {/* Qualifica e Confessione */}
          <div className="record-row bg-light border rounded p-3 my-3">
            <strong>Qualifica:</strong> <Field name={["qualifica"]} transformer={(value) => value || "Non disponibile"} /> {" ("}
            <Field name={["qualifica_specifica"]} transformer={(value) => value || "Non disponibile"} /> {"), "}
            <strong>Confessione:</strong> <Field name={["confessione"]} transformer={(value) => value || "Non disponibile"} />
          </div>

          {/* Dettagli Biografici */}
          <div className="record-row bg-light p-3 border rounded">
            <strong>Dettagli Biografici:</strong>
            <Field 
              name={["note"]} 
              transformer={(text) => (
                <TestoLungo 
                  inputText={text || "Non disponibile"} 
                  previewLength={500}
                />
              )} 
            />
          </div>

          {/* Sezione Monumenti e Fonti */}
          <div className="row mt-4">
{/* Monumenti Associati */}
<div className="col-md-6">
  <h3 className="text-uppercase text-muted">Monumenti Associati</h3>
  <div className="bg-light border rounded p-3">
    <Field 
      name={["luoghi_associati_alla_persona"]}
      transformer={(luoghi) => {
        if (!luoghi || luoghi.length === 0) return "Non disponibile";

        // Raggruppa i monumenti per caratteristica_di_dettaglio
        const monumentiRaggruppati = luoghi.reduce((acc, luogo) => {
          const categoria = luogo.luogo_di_interesse_id.caratteristica_di_dettaglio || "Altro";
          if (!acc[categoria]) acc[categoria] = [];
          acc[categoria].push(luogo.luogo_di_interesse_id);
          return acc;
        }, {});

        // Genera il testo da passare a TestoLungo con il link "Scopri di piÃ¹"
        const contenuto = Object.entries(monumentiRaggruppati).map(([categoria, monumenti]) => (
          `<div class="mb-3 p-2 border rounded">
            <h5 class="fw-bold text-primary">${categoria}</h5>
            <ul class="list-unstyled">
              ${monumenti.map((monumento) => 
                `<li>â€¢ ${monumento.nome_luogo} 
                  <a href="/monumento/?tb=luogo_di_interesse&id=${monumento.id}" target="_blank" class="text-decoration-none text-primary fw-bold ms-2">
                    ðŸ”— Scopri di piÃ¹
                  </a>
                </li>`
              ).join("")}
            </ul>
          </div>`
        )).join("");

        return <TestoLungo inputText={contenuto} previewLength={500} isHtml={true} />;
      }}
    />
  </div>
</div>
            {/* Fonti */}
            <div className="col-md-6">
              <h3 className="text-uppercase text-muted">Fonti</h3>
              <div className="bg-light border rounded p-3">
                <Field 
                  name={["fonti"]}
                  transformer={(fonti) => {
                    if (!fonti || fonti.length === 0) return "Non disponibile";

                    // Raggruppa le fonti per tipologia_specifica
                    const fontiRaggruppate = fonti.reduce((acc, fonte) => {
                      const categoria = fonte.fonte_id.tipologia_specifica || "Altro";
                      if (!acc[categoria]) acc[categoria] = [];
                      acc[categoria].push(fonte.fonte_id);
                      return acc;
                    }, {});

                    // Genera il testo da passare a TestoLungo
                    const contenuto = Object.entries(fontiRaggruppate).map(([categoria, fonti]) => (
                      `<div class="mb-3 p-2 border rounded"><h5 class="fw-bold text-primary">${categoria}</h5><ul class="list-unstyled">` +
                      fonti.map((fonte) => `<li>â€¢ ${fonte.nome}</li>`).join("") +
                      `</ul></div>`
                    )).join("");

                    return <TestoLungo inputText={contenuto} previewLength={500} isHtml={true} />;
                  }}
                />
              </div>
            </div>
          </div>
        </Record>
      </div>

      {/* Colonna Laterale - Immagine */}
      <div className="col-md-4">
        <Record>
          <div className="image-wrapper">
            <div className="record-item">
              <div className="image-container">
                <Field
                  name={["link_immagine"]}
                  transformer={(url) =>
                    url ? (
                      <img src={url} alt="Anteprima immagine" className="centered-image" />
                    ) : (
                      <img src="https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg" alt="Nessuna immagine disponibile" className="centered-image" />
                    )
                  }
                />
              </div>
            </div>
          </div>
        </Record>
      </div>
    </div>
  );
}
